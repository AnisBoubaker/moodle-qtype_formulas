 <span style="font-size: 120%; font-weight: bold;">Documentation</span>
 
 <div style="font-style: italic; margin-top: 3px;">Documentation of formulas question type</div>
    
 </div>
 <p></p><ul><li><a href="#Introduction">Introduction</a></li><li><a href="#Question_text_placeholder">Question text placeholder</a></li><ul><li><a href="#Placeholder_of_the_subquestions">Placeholder of the subquestions</a></li><li><a href="#Placeholder_of_answer_boxes">Placeholder of answer boxes</a></li></ul><li><a href="#Variable_system">Variable system</a></li><ul><li><a href="#Scope_of_variable">Scope of variable</a></li><li><a href="#Variable_name">Variable name</a></li><li><a href="#Variable_type">Variable type</a></li><li><a href="#Random_variables">Random variables</a></li><li><a href="#Variable_assignments">Variable assignments</a></li><li><a href="#Using_variable_in_text">Using variable in text</a></li></ul><li><a href="#Answer_and_grading_criteria">Answer and grading criteria</a></li><ul><li><a href="#Answer_type">Answer type</a></li><li><a href="#Model_answer">Model answer</a></li><li><a href="#Grading_criteria">Grading criteria</a></li><li><a href="#Grading_variables">Grading variables</a></li><li><a href="#Manual_grading_criteria">Manual grading criteria</a></li></ul><li><a href="#Unit_system">Unit system</a></li><ul><li><a href="#Unit_and_format">Unit and format</a></li><li><a href="#Conversion_rules">Conversion rules</a></li></ul><li><a href="#Trial_mark_sequence">Trial mark sequence</a></li><li><a href="#Grading_scheme">Grading scheme</a></li><li><a href="#Appendix">Appendix</a></li><ul><li><a href="#List_of_functions_for_number">List of functions for number</a></li><li><a href="#List_of_operators_for_number">List of operators for number</a></li><li><a href="#List_of_additional_functions_for_non-number_type_variables">List of additional functions for non-number type variables</a></li></ul></ul>  <p></p><hr><h1><a name="Introduction"></a>Introduction<a href="#Introduction" class="section_anchor"></a></h1><p>This
 question type aims to be generic so that various type of non-trivial 
questions can be created easily. The variable system and answer boxes 
allows great flexibility to define question and simplify the job to make
 complex question. In this documentation, various part of this question 
type is described, including the formatting, variables, grading, unit 
system and trial mark sequence. </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> For creating simple question, see <a href="http://code.google.com/p/moodle-coordinate-question/wiki/Tutorial">Tutorial</a>. </td></tr> </tbody></table><p></p><hr><h1><a name="Question_text_placeholder"></a>Question text placeholder<a href="#Question_text_placeholder" class="section_anchor"></a></h1><p>You
 can insert the subquestion text and answer boxes at a given location 
using placeholders.  To substitute a placeholder by its the contents, 
the placeholder name needed to be enclosed by <tt> { </tt> and <tt> } </tt> in the text. </p><h2><a name="Placeholder_of_the_subquestions"></a>Placeholder of the subquestions<a href="#Placeholder_of_the_subquestions" class="section_anchor"></a></h2><p>This kind of placeholder allows you to insert subquestion in a particular location in the main question. </p><p>The placeholders name is a string starting with '#' symbol and followed by any characters of <tt> [A-Z a-z 0-9] </tt>, such as <tt>#1</tt>, <tt>#2a</tt>, <tt>#2b</tt> and <tt>#A</tt>. Subquestion can be labelled by a <i>placeholder name</i> in the options called '<i>Placeholder</i>'.
 Note that, by default, the subquestion will be appended at the end if 
no placeholder is specified. To use them in the main question text, type
 <tt> {#1} </tt> instead of <tt>#1</tt>, for example: </p><pre class="prettyprint">The following is the question 1, part a and part b.<br>{#1a}<br>{#1b}<br>The following is the question 2.<br>{#2}</pre><h2><a name="Placeholder_of_answer_boxes"></a>Placeholder of answer boxes<a href="#Placeholder_of_answer_boxes" class="section_anchor"></a></h2><p>This kind of placeholder provides a simple way to arrange the answer boxes in the subquestion text. </p><p>It
 is particularly useful when the subquestion requires more than one 
answer. This flexibility allows you to place the answer boxes in the 
form of matrix, coordinates, embedding into the question text or any 
other way you wanted. </p><p>The placeholder names are <tt> _0 </tt> for the first answer box, <tt> _1 </tt> for the second answer box, etc, and <tt> _u </tt> for the unit box. The number of the answer boxes that can be used is the same as the number of elements entered in the <a href="#Answer">Answer</a>. For example, with two answers for one subquestion, the following can be used </p><pre class="prettyprint">What is the coordinate of the particles?<br>(x,y) = ({_0}, {_1}) {_u}</pre><p>The box <tt> {_0} </tt> is actually corresponding to the special variable <tt> _0 </tt> in the <a href="#Grading_variables">Grading variables</a>. By default, all missing placeholder are automatically appended at the end. That is <tt> {_0}{_u} </tt> for one answer subquestion, and <tt> {_0}{_1}{_u} </tt> for two answers subquestion. </p><p>An exception for the substitution is that there will only be one longer answer box when <tt> {_0}{_u} </tt>
 are immediately neighbour to each other, and there is only one 
numerical answer and unit. In this case, the answer and unit box will 
merge together as one long answer box, and the students are expected to 
type them in the same box. </p><hr><h1><a name="Variable_system"></a>Variable system<a href="#Variable_system" class="section_anchor"></a></h1><p>Variables
 can be used to substitute question texts, define the answers and 
specify grading criteria. One of the main purpose of the variables 
system is to simplify the task to make variation of the questions. Since
 the variables are generated at the beginning of a quiz, the quiz will 
be halted if any errors occur. Hence, in order to minimize the error, 
the system is designed to only have deterministic variables type, 
constant length lists and no branching.  </p><h2><a name="Scope_of_variable"></a>Scope of variable<a href="#Scope_of_variable" class="section_anchor"></a></h2><p>There are four places that you can define and manipulate the variables, each of them have different scope of application. </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Random variables</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The place to define the variation of variables for the whole questions. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Global variables</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The scope includes all (instantiated) random variables. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Local variables</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The scope includes all global variables. Note: Each subquestion has its own local variables scope. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Grading variables</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The scope includes all local variables, plus special variables (e.g. <tt> _0, _1 </tt>) depending on students' response. </td></tr> </tbody></table><p></p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Main text</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> All global variables can be used in the substitution </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Subquestion text</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> All local variables for the subquestion can be used in the substitution </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Answer</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> All local variables for the subquestion can be used in the <i>expression</i> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Grading criteria</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> All grading variables can be used in the <i>expression</i> </td></tr> </tbody></table><p></p><h2><a name="Variable_name"></a>Variable name<a href="#Variable_name" class="section_anchor"></a></h2><p>A variable name is a string of alphanumeric characters <tt> [a-z A-Z 0-9 _] </tt> (Numbers and underscore cannot be located at the start of string). Examples of valid variable are </p><pre class="prettyprint">x<br>y1<br>z_1<br>foo_bar</pre><h2><a name="Variable_type"></a>Variable type<a href="#Variable_type" class="section_anchor"></a></h2><p>Each
 variable will be assigned with a type implicitly. A type is either 
number, string or algebraic variable, plus list of numbers or list of 
strings. List is defined as the elements enclosed by <tt> [ </tt> and <tt> ] </tt>. An element in list can be referred using syntax <tt> A[b] </tt>, for example, <tt> [4,5,6][0] </tt> gives the first number, that is, 4. These types are listed below: </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Number</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> A number, for example: 1.2e-3 </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>String</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Characters enclosed by two double quotes, for example: "Hello" </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>List of number</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Numbers enclosed by <tt> [ </tt> and <tt> ] </tt>, for example: <tt> [4,5,6] </tt>, The equivalent short hand syntax are <tt> [4:7] </tt> or <tt> [4:7:1.] </tt></td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>List of string</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Strings enclosed by <tt> [ </tt> and <tt> ] </tt>, for example: <tt> ["A", "B", "C"] </tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Algebraic variable</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> It is simply a set of numbers (<a href="#Random_variables">see syntax</a>) defined in the non-random variable scope, for example: <tt> {1:100} </tt>. </td></tr> </tbody></table><p></p><h2><a name="Random_variables"></a>Random variables<a href="#Random_variables" class="section_anchor"></a></h2><p>During the quiz creation, each random variables will be assigned by <i>ONE</i> value defined by the <i>expression</i>. Hence, each student can have their own set of value for the quiz attempt. </p><p>A random variable has different syntax than other variables and it only be defined in the field <i>Random variables</i>.
 These variables can be defined by assigning a set of elements or a 
shuffling of a list. The probability of selecting each element is equal 
so that each element has equal chance to be drawn. There are three main 
types of expressions: </p><p><strong>Set of elements</strong>: A set of elements is elements enclosed by '<strong>{</strong>' and '<strong>}</strong>'.
 The element can be either a number, a string, a number list, or a 
string list. For example, the variable below is a set of list of 
numbers, and the probability for element <tt>[2,3]</tt> is 1/5: </p><pre class="prettyprint">F = {<br>[0,0],<br>[1,1],<br>[2,4],<br>[3,9],<br>[4,16]<br>};</pre><p><strong>Set of numbers</strong>: A set of numbers is numbers enclosed by '<strong>{</strong>' and '<strong>}</strong>'.
 You can also specified a range in the format of 'start:stop:interval' ,
 where the numbers satisfied (start + n*interval) &lt; stop, n = 
0,1,2,3,..., will be added. If the interval is not specified, value 1 
will be used. Note that the last end point is <strong>not</strong> 
included by definition, but may be include for non-integer due to 
numerical errors. The set of numbers defined below demonstrate different
 range syntax. Also, the probability of the elements in each set are 
1/8, 1/10 and 1/20 respectively. </p><pre class="prettyprint">A = {1,2,3,4,5,6,7,8};<br>B = {0:1:0.1};<br>C = {1:10, 10:100:10, 100, 200};</pre><p><strong>Shuffled list</strong>: A list can be passed to the shuffle function. For the example below, the instantiated variable <tt> S </tt> with take one of the permutation of the input list, say <tt> [4,3,2,5] or [2,5,4,2] </tt> The probability of each list is therefore 1/4! = 1/24. </p><pre class="prettyprint">S = shuffle([2,3,4,5]);</pre><h2><a name="Variable_assignments"></a>Variable assignments<a href="#Variable_assignments" class="section_anchor"></a></h2><p>Variable
 assignments allow you to define and manipulate variables. It can be 
defined in the option field of global variables, local variables and 
grading variables. </p><p><strong>Expression</strong>: It is any combinations of the numbers, variables together with operators and functions listed in the <a href="#Appendix">Appendix</a>.
 Typically, it is just a simple mathematical formula evaluated to a 
number. The variables used in the expression must be defined before. </p><p><strong>Assignment</strong>: It is used to assign the evaluated result of an expression to a variable, in the form of '<i><strong>name</strong></i> = <i><strong>expression</strong></i> ;' . </p><p><strong>For loop</strong>: It allows a simple iteration in the form of <tt>for(element:list)</tt>. All elements <tt> element </tt> in the <tt> list </tt> will be iterated. </p><p>Examples of the assignment: </p><pre class="prettyprint">a = 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# text after "#" and the end of line will be treated as comment<br>b = exp(3.333);<br>d = round(b, 1); &nbsp;# it can round the number to the desire decimal point <br>e = 1 + sin(2) + pow(a,2);<br>A = [1,2,3];<br>x = A[0];<br>y = A[a];<br>z = A[2];<br>w = A[0] + A[1] + A[2];<br>m = max(x, y);<br>distance = sqrt(x*x + y*y + z*z);<br>theta = atan2(y, x);<br>smaller = x &lt; y; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# smaller is 1<br>con = (x &lt; y) + (y &lt; z); &nbsp; &nbsp;# con is 2<br>B = fill(3,0); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# B is now [0,0,0]<br>C = map("sqrt",fill(3,16)); # square root of [16,16,16], so C is now [4,4,4]<br>s = 0;<br>for (i:A) &nbsp;s = s + i; &nbsp; &nbsp; &nbsp; # s is 6 after the loop<br>for (i:[0:3]) {<br>&nbsp;B[i] = sum(map("+",A,fill(3,i))); &nbsp;# B will be [6,9,12]<br>}<br>p = pick(a+9,"","A","B"); &nbsp; # pick() always choose the first element if index out of range<br>u = {-3,-2,-1,1:100}; &nbsp; &nbsp; &nbsp; # u and v define algebraic variables, the numbers are the points for evaluation<br>v = {-100:100:1};</pre><p>Note: </p><ul><li><strong>Important</strong>! <strong>Index out of range cannot be checked by the validation</strong>
 during question save, so you have to check it yourself. Otherwise, the 
quiz initialization for some students may fail. Use pick() as a safe 
variant if applicable. </li><li>Logical true is treated as 1 and false is 0, so the variable <tt> con </tt> above gets the value 2. </li><li>There is no branching, however, you may use the ternary operator <tt>(condition) ? (true) : (false)</tt> for number or the pick() function for general case. </li><li>The available functions are list in the <a href="#Appendix">Appendix</a>. There are many additional functions for the numeric list operation, and few for the list of string. </li></ul><p></p><h2><a name="Using_variable_in_text"></a>Using variable in text<a href="#Using_variable_in_text" class="section_anchor"></a></h2><p>It is simple to substitute the variables in the text, you only need to enclose the corresponding variables by <tt> { </tt> and <tt> } </tt>. </p><p>Each text field have a <a href="#Scope_of_variable">scope</a> of variables. All variables <tt> x </tt> of either number or string in the scope of the text can be used to replace the corresponding placeholder <tt> {x} </tt> in the text. </p><p>It is also possible to evaluate an <i>expression</i> directly in the text by adding an equal sign at the beginning of the bracket such as <tt> {=x/1000} </tt>.
 It is easier to use if the named variables are not required. However, 
no error check will be done unless the question is being instantiated in
 the quiz. An example is the rescaling of meter to kilometer below: </p><pre class="prettyprint">What is the speed of the rocket if it travels with distance {=x/1000} km in {t} s?</pre><hr><h1><a name="Answer_and_grading_criteria"></a>Answer and grading criteria<a href="#Answer_and_grading_criteria" class="section_anchor"></a></h1><p>For
 a subquestion to become valid, you must give a mark and define an 
answer for it. Also, grading critera must be specified in order to check
 the correctness of a students' response. </p><h2><a name="Answer_type"></a>Answer type<a href="#Answer_type" class="section_anchor"></a></h2><p>This
 question support four answer types. Each type will accept a particular 
set of numbers, operators, functions and possibly algebraic variables. 
Depending on the quiz purpose, some or all of these answer types may be 
used. </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Number </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> You can type in the standard scientific E notation such as: 3.14, 6.626e-34. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Numeric </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> You can type in numbers and arithmetic operation <tt> + - * / ^ </tt> and <tt> ( ) </tt> and the constant pi such as: 5+1/2, 2^9, 3pi. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Numerical formula </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;">
 You can type in everything of numeric plus a set of single variable 
functions sin(), cos(), tan(), asin(), acos(), atan(), exp(), log10(), 
ln(), sqrt(), abs(), ceil(), floor() such as: sin(pi/12), 10 ln(2) </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Algebraic formula </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> You can type in every numerical formula and any algebraic variables. </td></tr> </tbody></table><p></p><p>Note that: </p><ul><li><strong>Students will also need to know these rules in order to input the answer correctly.</strong> </li><li>The possible input have the following relation: Number ⊂ Numeric ⊂ Numerical formula ⊂ Algebraic formula. </li><li>The answer will need a list of string for Algebraic formula and list of number for other answer type. </li><li>"<tt>^</tt>" in the algebraic formula means "power", not "exclusive or" </li><li>Juxtaposition between numbers or symbols mean multiplication. </li><li>The
 format check in the quiz interface will show warning sign when the 
format is wrong for the answer type. It does not give any information 
about the correct answer. </li><li>All symbols will be treated as 
algebraic variable in the answer type of algebraic formula. Hence, you 
may need to hint students what symbols should be used in the question. </li></ul><p></p><h2><a name="Model_answer"></a>Model answer<a href="#Model_answer" class="section_anchor"></a></h2><p>Depending
 on the answer type, the answer options will accept either expression 
that evaluated to a list of number or string (for algebraic formula). 
The size of the list will determine how many input boxes for this 
subquestion. If only one answer is required, you can specify a number or
 string instead of the one element list. </p><p>For the answer type of 
Number, Numeric and Numerical formula, a list of number (or a single 
number) is required. Suppose the variables are defined, each line below 
is a possible answer. </p><pre class="prettyprint">pi()<br>[sin(pi()/2), cos(pi()/2)]<br>[ans[0], ans[1], ans[2]]<br>ans</pre><p>For
 the answer type of Algebraic formula, a list of string (or a single 
string) is required. Suppose the variables are defined, each line below 
is a possible answer. </p><pre class="prettyprint">"exp(-a x)"<br>"a x^2 + b y^2"<br>["a sin(x)", "b cos(x)"]</pre><p>Note
 that all algebraic variables must be defined in order to be usable in 
the answer. For the answers above to work, you will need to define the 
following variables: </p><pre class="prettyprint">a = 2;<br>b = 3;<br>x = {-100:100:1};<br>y = {1:100:1};</pre><h2><a name="Grading_criteria"></a>Grading criteria<a href="#Grading_criteria" class="section_anchor"></a></h2><p>A
 grading criteria is required to determine the correctness of the 
students' response.  It requires a expression evaluated to a number in 
which 0 means false and 1 means true. Typically, it is either the 
relative error or absolute error with a tolerance level. </p><p>For the 
question with only one answer, the absolute error is simply the 
different between the model answer and students' response. Hence if the 
true answer is 3.2 and the students' response is 3.1, then absolute 
error is <tt> |3.2-3.1| = 0.1 </tt> You may want to limit the range of correct response, say, 0.05. In this case, you should select <tt> absolute error &lt; 0.05 </tt> Similarly, the relative error is defined by the absolute error divided by the absolute value of model answer. See the <tt> _err </tt> and <tt> _relerr </tt> in grading variables below for more details. </p><h2><a name="Grading_variables"></a>Grading variables<a href="#Grading_variables" class="section_anchor"></a></h2><p>For
 the typical case, the absolute error and relative error can satisfy 
most grading criteria. However, sometimes there is a need for other 
grading criteria. </p><p>In the scope of Grading variables, it contains all local variables and <strong>students' response</strong>.
 With the response from student, you can then define your own grading 
criteria. The information related to the students' response and model 
answer is stored in the set of special variables started by underscore 
as shown below: </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Variable name</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Description</strong> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _0, _1, _2, ...</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The students' response of each "coordinates". The first "coordinate" is <tt> _0 </tt> corresponding to the answer box <tt> {_0} </tt> in the subquestion, etc. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _a </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> It is a list of model answer, which is the answer defined in the answer field. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _r </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> It is a list of students' response with the same size as <tt>_a</tt>. The 0-th element is the same as <tt> _0 </tt>, etc.  </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _d </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> It is a list of the different between each elements, given by <tt>_d = diff(_a,_r); </tt>, see <a href="#Appendix">Appendix</a> for the details of the function . </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _err </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Absolute error, using Euclidean norm <tt> |a-r| </tt>, i.e. <tt> _err = sqrt(sum(map("*",_d,_d))); </tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> _relerr </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Relative error, divide the absolute error by the norm of model answer <tt> |a-r|/|a| </tt>, i.e. <tt> _relerr = _err/sqrt(sum(map("*",_a,_a))); </tt> </td></tr> </tbody></table><p></p><p>Note: </p><ul><li>The corresponding input boxes of <tt> _0, _1, ... </tt> can be specified as <tt> {_0}, {_1}, ... </tt> in the subquestion text. </li><li><strong><tt> _relerr </tt> is NOT defined for algebraic answer!</strong> So the <tt> _err </tt> should be used instead. </li><li>For
 non-algebraic response, the students' response will be rescaled toward 
the unit of the model answer. For example, if the model answer is 2m and
 the students' response is 199cm, then <tt> _a </tt> is <tt> [2] </tt>, while <tt> _r </tt> is <tt> [1.99] </tt> and <tt> _0 </tt> is <tt> 1.99 </tt>. It has no effect if no unit is used. </li><li>For the example of more than one "coordinate": if <tt> _a = [100,100]; _r = [101,102]; </tt>, then <tt> _relerr = sqrt(1*1+2*2)/sqrt(100*100+100*100) ≒ 0.0158 </tt> </li><li>In
 this sense, the answer defined in the answer field is only a "model 
answer" because it may not directly related to the correctness of 
answer. </li></ul><p></p><h2><a name="Manual_grading_criteria"></a>Manual grading criteria<a href="#Manual_grading_criteria" class="section_anchor"></a></h2><p>In
 general, other than true or false, the grading criteria can be any 
number between 0 (all wrong) and 1 (all correct). For the value 1, it 
means the student can get the full mark for this subquestion (see <a href="#Grading_scheme">Grading scheme</a>).
 A fractional value here can represent the partial correctness of the 
response. Note that value smaller than 0 is treat as 0 and value bigger 
than 1 is treated as 1. The following are ony some situations that 
manual grading criteria is desired: </p><p>1. <strong>Multiple correct answer</strong>: Suppose that you have asked a question for a number <tt> x </tt> that is a multiple of <tt> 7 </tt> and <tt> 40 &lt; x &lt; 50 </tt>. How can you achieve this? As mentioned before, the variable <tt> _0 </tt> will store the response when a student input the ansyour, say <tt> 42 </tt>. The following formula can check whether the response is correct: </p><pre class="prettyprint">_0 == 42 || _0 == 49</pre><p>2. <strong>Multiple criteria</strong>:
 The above example only use a fixed number, so how to grade answer with 
random variations? Suppose you now want a question with a variable range
 for each question <tt> a &lt; x &lt; a+10 </tt>. To determine the 
correctness, you need to check two criteria, type the following in the 
Grading Variables and Grading Criteria box respectively: </p><pre class="prettyprint">criterion1 = _0 % 7 == 0; &nbsp;# whether the remainder is 0. Note that true is 1 and false is 0.<br>criterion2 = a &lt; _0 &amp;&amp; _0 &lt; a+10; &nbsp; # whether the response is in the desired range.</pre><pre class="prettyprint">criterion1 &amp;&amp; criterion2</pre><p>3. <strong>Mark for different accuracy</strong>:
 Suppose you want to give different marks for the accuracy of the 
response, say full mark for 1% absolute error and half mark for 1% to 5%
 absolute error. The following criteria can be used: </p><pre class="prettyprint">case1 = _err &lt; 0.01;<br>case2 = _err &lt; 0.05;</pre><pre class="prettyprint">max (case1, 0.5*case2)</pre><hr><h1><a name="Unit_system"></a>Unit system<a href="#Unit_system" class="section_anchor"></a></h1><p>It
 allows you to test the knowledge of students about unit. Also, it 
allows the student to use alternative units for the same answer, 
provided that they are convertible to each other. </p><p>You can specify
 mark fraction deduction for a wrong unit. The wrong unit here means 
that the unit that is not convertible to the correct unit, under 
conversion rules.  Suppose a student get 2 marks for this subquestion 
answer. If the unit penalty = 0.2 and she give wrong unit, then the 
student can get 2(1-0.2) = 1.6 mark for this submission. (See <a href="#Grading_scheme">Grading scheme</a>). </p><p>If
 a teacher does not specify any unit for the subquestion, then the unit 
box will not be displayed and there is no need for students to enter it.
 However, if the student enters anything after their answer, it is 
usually considered to be incorrect so the mark of unit will be deduced. 
Hence, in the above case, it is better to set 1 for mark deduction. </p><p>Nevertheless,
 if you do not want to penalize the student entering arbitrary string at
 the end of answer, set 0 for mark deduction. i.e. their unit does not 
count toward their grade, but you still allow student use any 
convertible unit. Note that you have assumed a default answer that does 
not require unit. </p><h2><a name="Unit_and_format"></a>Unit and format<a href="#Unit_and_format" class="section_anchor"></a></h2><p>A <i>unit</i> is either a <i>base unit</i> or a <i>composite unit</i>: </p><ul><li><i>Base unit</i>: a simple alphabetic string without exponent (e.g. ^2) </li><li><i>Composite unit</i>: compose of <i>base unit</i> separated by space, possibly together with exponents. Note that the ordering of base unit is not important </li></ul><p></p><p>For a given physical quantity, the unit name can be entered using the following rules: </p><ol><li>Base unit: e.g. length (m), it should be simply entered as <tt> m </tt> </li><li>Positive exponent: e.g. area (m<sup>2</sup>), it should be entered as <tt>m^2</tt>. </li><li>Negative exponent: e.g. wavenumber (m<sup>-1</sup>), it should be entered as <tt>m^(-1)</tt>. </li><li>Compose unit: e.g. velocity (m s<sup>-2</sup>), it should be entered as <tt>m s^(-2)</tt> with the base unit separated by the space (representing multiplication). </li><li>Alternative for negative exponent: One preceding division operator can also be used, say <tt>m/s^2</tt> which is equivalent to <tt>m s^(-2)</tt>. </li></ol><p></p><p>Students need to enter the same format for unit (i.e. they need to know the above rule). Examples: </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Unit</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Description</strong> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> m </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> a base unit, meter, for the dimension length </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> kg </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> a base unit, kilogram, for the dimension mass </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> N </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> a base unit (it is called derived unit in SI), newton, for the physical quantity force </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> m/s </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> a composite unit, for the physical quantity velocity </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> kg m/s^2 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> a composite unit, with the same dimension as newton </td></tr> </tbody></table><p></p><p>Examples of answer with unit: </p><pre class="prettyprint">1 m<br>0.1 m^2<br>20 m s^(-1)<br>400 kg m/s<br>100 kW</pre><h2><a name="Conversion_rules"></a>Conversion rules<a href="#Conversion_rules" class="section_anchor"></a></h2><p>Conversion rules allow students to use alternative unit. For the details of the rule, See <a href="http://code.google.com/p/moodle-coordinate-question/wiki/UnitConversion">UnitConversion</a>. </p><p><strong>Other rules</strong>: You can specify the conversion of the <i>base unit</i> by equating their values under different units. Examples: </p><pre class="prettyprint">1 m = 100 cm = 1000 mm;<br>1 cm = 0.3937 inch;</pre><p>With the above conversion rule, the following responses are completely equivalent: </p><pre class="prettyprint">10 inch<br>25.4 cm<br>254 mm<br>0.254 m</pre><p>For the SI prefix, an alternative syntax can be used: <i>base unit</i> followed by a list of SI prefix name. </p><pre class="prettyprint">W: k M G T;</pre><p>which is equivalent to <tt> 1 W = 1e-3 kW = 1e-6 MW = 1e-9 GW = 1e-12 TW </tt>. </p><p><strong>Basic conversion rule</strong>:
 For the conversion between common SI unit with different prefix, there 
are a set of predefined conversion rules for them. The only thing you 
need to do is to choose the '<i>Common SI unit</i>' in the '<i>Basic conversion rule</i>'. </p><p>The following answers in the each group </p><pre class="prettyprint">5 s<br>5000 ms<br>5e9 ns</pre><pre class="prettyprint">0.2 m/s<br>200 mm/s</pre><pre class="prettyprint">1 m^2<br>10000 cm^2<br>1e-6 km^2</pre><p>are all equivalent to each other. So if <strong>one</strong> of the answer is correct, all other are also correct answers. </p><p>Note
 that you may also use 'None' if you find it contradicting with your own
 rules.  If you want to define you own, see the file 
conversion_rules.php. </p><p><strong>Identifying composite unit</strong>:  Note that, the <i>base units</i> and <i>composite unit</i> cannot be identified in the conversion rules above. To specify a list of allowable <i>composite unit</i>, you can use separator '=' in the '<i>Unit</i>'. For example </p><pre class="prettyprint">N = kg m s^(-2)</pre><p>It identity the unit Newton to its SI counterpart. Hence, both <i>composite unit</i> are correct. </p><hr><h1><a name="Trial_mark_sequence"></a>Trial mark sequence<a href="#Trial_mark_sequence" class="section_anchor"></a></h1><p>This option only apply to the adaptive mode of moodle quiz. </p><p>In
 the adaptive mode, students are allowed to submit answer to a 
particular question again and again. This field defines the mark 
sequence that a student can get for each resubmission. Note that it 
actually alter the default behavior of the adaptive mode. </p><p>The 
input is a list of numbers separated by comma. Each number represents a 
fraction of the maximum mark that a student can get in the first, 
second, third, etc. submission. Hence, if this field has value 1, the 
student can try it once only. </p><p>If the sequence is ended with a 
comma, infinite resubmission is allow. In this case, the mark that 
students can get in the following unlisted trial is decreased uniformly 
with the value equal to the difference of last two value. Note that the 
minimum mark is always zero (See <a href="#Grading_scheme">grading scheme</a>). </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Trial mark sequence</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Maximum mark for each trial</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Description</strong> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100% </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Only one trial is allowed </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, 0.7, 0.3 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 70%, 30% </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Three trials are allowed </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, 0.7, 0.3, 0 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 70%, 30%, 0% </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Four trials are allowed, but the last trial has no mark </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, 0, 0, 0 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 0%, 0%, 0% </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Four trials are allowed, but only the first trial has non-zero mark </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 100%, 100%, ... </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Infinite trials. The difference is 0, which is repeated </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, .9, </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 90%, 80%, 70%, 60%, ... </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Infinite trials. Difference between 1st and 2nd trial is 10%, which is repeated </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, .6, </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 60%, 20%, 0%, 0%, ... </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Infinite trials. Difference between 1st and 2nd trial is 40%, which is repeated </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 1, .5, .3, </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> 100%, 50%, 30%, 10%, 0%, 0%, ... </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Infinite trials. Difference between 2nd and 3rd trial is 20%, which is repeated </td></tr> </tbody></table><p></p><hr><h1><a name="Grading_scheme"></a>Grading scheme<a href="#Grading_scheme" class="section_anchor"></a></h1><p>The following is the grading formula used to grade a particular subquestion: </p><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Symbol</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Description</strong> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> c </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;">
 Correctness. It takes value between 0 and 1. Boolean false is treated 
as 0 and true is treated as 1. Other values may be possible if manual 
condition is used (see <a href="#Grading_criteria">Grading criteria</a>) </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> u </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Deduction for wrong unit (see <a href="#Unit_system">Unit system</a>). In the formula, it always takes value 0 if the unit is correct under <a href="#Conversion_rules">Conversion rules</a> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> m </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Default mark of the subquestion. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> r_n </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> Maximum mark fraction of the n-th submission, for adaptive mode only (See <a href="#Trial_mark_sequence">Trial mark sequence</a>) </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> f </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> The computed final mark. </td></tr> </tbody></table><p></p><p>For non-adaptive mode: </p><pre class="prettyprint">f = m*c*(1-u)</pre><p>For adaptive mode (see <a href="http://docs.moodle.org/" rel="nofollow">moodle documentation</a>): </p><pre class="prettyprint">f = max(r_n*m*c*(1-u))</pre><p>The
 maximum is taken over all submissions.  From the above formula, even 
though a student get a low mark in the first attempt, it is still 
possible for them to get a higher mark in the following attempt. </p><hr><h1><a name="Appendix"></a>Appendix<a href="#Appendix" class="section_anchor"></a></h1><h2><a name="List_of_functions_for_number"></a>List of functions for number<a href="#List_of_functions_for_number" class="section_anchor"></a></h2><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>pi()</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>abs(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>acos(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>acosh(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>asin(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>asinh(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>atan(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>atanh(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>ceil(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>cos(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>cosh(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>deg2rad(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>exp(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>expm1(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>floor(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>is_finite(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>is_infinite(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>is_nan(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>log(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>log10(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>log1p(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>rad2deg(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>round(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>sin(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>sinh(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>sqrt(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>tan(x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>tanh(x)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>atan2(y,x)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>fmod(x,y)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>log(x,base)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>pow(x,y)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>round(x,precision)</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>min(x1,x2,...)</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>max(x1,x2,...)</tt> </td></tr> </tbody></table><p></p><p>Note
 that the list of function used in the variable assignment is (almost) a
 superset of the list of function of usable in the algebraic formula. </p><h2><a name="List_of_operators_for_number"></a>List of operators for number<a href="#List_of_operators_for_number" class="section_anchor"></a></h2><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>+</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>-</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>*</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>/</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>%</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&gt;</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&lt;</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&gt;=</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&lt;=</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>==</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>!=</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&amp;&amp;</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>| |</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>!</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&lt;&lt;</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&gt;&gt;</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>^</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>~</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>&amp;</tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>|</tt> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>? :</tt> </td></tr> </tbody></table><p></p><p>Note that the operator "<tt>^</tt>" means "exclusive or" which have different meaning in the algebraic formula. In algebraic formula, "<tt>^</tt>" means "power". </p><h2><a name="List_of_additional_functions_for_non-number_type_variables"></a>List of additional functions for non-number type variables<a href="#List_of_additional_functions_for_non-number_type_variables" class="section_anchor"></a></h2><p></p><table class="wikitable"><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>function</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Examples</strong> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <strong>Description</strong> </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> concat(X1,X2,...) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;">  <tt> concat([1],[2,3],[4])</tt> <br> # <tt>[1,2,3,4]</tt> <br> <tt> concat(["A"],["B"]) </tt> <br> # <tt> ["A","B"] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return a list by concatenating X1, X2, ... together </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> diff(X,Y) </tt> <br> <tt> diff(X,Y,N) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;">  <tt> diff([1,1,1],[1,4,9]) </tt> <br> # <tt> [0,3,8] </tt> <br> <tt> diff(["x*x"],["x^2"]) </tt> <br> # <tt> [0] </tt> <br> <tt> diff(["x"],["x^2"],20) </tt> <br> # A list with number &gt;= 0 </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt>***</tt> return a list of number D of difference between the list X and Y elementwise. <br> If X and Y are a list of number, then <tt> D[i] </tt> will be <tt> abs(X[i]-Y[i]) </tt> <br> If X and Y are a list of string, then <tt> D[i] </tt> will be the difference between the algebraic formula <tt> X[i] </tt> and <tt> Y[i] </tt>  </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> fill(N, value) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> fill(3,0) </tt> <br> # <tt> [0,0,0] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return a list with size <tt> N </tt> and all elements filled by value </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> len(X) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> len([0:10]) </tt> <br> # <tt> 10 </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return the length of the list X </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> inv(X) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> inv([0,3,1,2]) </tt> <br> # <tt> [0,2,3,1] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return the inverse permutation of X, which is the same as R in <tt> for(i:[0:N]) R[X[i]]=i </tt> with size N of X. <br> It has the property that <tt> X==inv(inv(X)) </tt> and <tt> A==sublist(sublist(A,X),inv(X)) </tt>   </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> join(s,A,B...) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> join(" ",["Hello","world"]) </tt> <br> # <tt> "Hello world" </tt> <br> <tt> join("",1,"+",2,["="]) </tt> <br> # <tt> "1+2=" </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return a string that join all elements together and separated by string <tt> s </tt>. <br> The <tt> A, B, ... </tt> can be any number or string or list. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> map(uop,X) </tt> <br> <tt> map(bop,X,Y) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> map("abs",[-1,2,-3]) </tt> <br> # <tt> [1,2,3] </tt> <br> <tt> map("+",[1,2,3],5) </tt> <br> # <tt> [6,7,8] </tt> <br> <tt> map("&lt;",[3,4],[1,7]) </tt> <br> # <tt> [0,1] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return a list by applying the operator/function elemenwise to all elements in X. <br> The uop or bop are the string of unary or binary operators (or functions) for numbers respectively. <br> <tt> map(uop,X) </tt> has the meaning as R in <tt> for(i:[0:N]) R[i]=op(X[i]); </tt> <br> <tt> map(bop,X,Y) </tt> has the meaning as R in <tt> for(i:[0:N]) R[i]=op(X[i],Y[i]) </tt> for function, <br> or <tt> for(i:[0:N]) R[i]=X[i] bop Y[i] </tt> for operator. <br> Either X or Y can be a number and it will automatically convert to the same size of the other list. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> pick(i,X) </tt> <br> <tt> pick(i,x0,x1,...) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> pick(1&lt;2,["A","B"]) </tt> <br> # <tt> "B" </tt> <br> <tt> pick(10,"","A","B") </tt> <br> # <tt> "" </tt> <br> <tt> pick(1,[1,2],[3,4]) </tt> <br> # <tt> [3,4] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> A safe variant of list subscript. It will pick the i-th element from the list X or the first element if index out of range. <br> <tt> pick(i,x0,x1,...) </tt> will pick the i-th element in the <tt> [x0,x1,...] </tt>, or x0 if index out of range. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sort(X) </tt> <br> <tt> sort(X,Y) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sort(["B","C","A"]) </tt> <br> # <tt> ["A","B","C"] </tt> <br> <tt> sort(["B","C","A"],[0,2,1]) </tt> <br> # <tt> ["B","A","C"] </tt>  </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return the sorted list of X in ascending order. <br> <tt>sort(X,Y)</tt> will sort the list X,Y together by sorting Y in ascending order and return the sorted list X. </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> str(x) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> str(1.1) </tt> <br> # <tt> "1.1" </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> convert the number x into a string </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sublist(X,Y) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sublist([7,8,9],[1,1,2]) </tt> <br> # <tt> [8,8,9] </tt> <br> <tt> sublist([7,8,9],[2,1,0]) </tt> <br> # <tt> [9,8,7] </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return a sublist R of X using list Y as index, where <tt> R[i] = X[Y[i]] </tt>. <br> If Y is a <i>permutation</i>, say <tt>Y=shuffle([0:5])</tt>, then X will be permuted depending on Y </td></tr> <tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sum(X) </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> <tt> sum([1,2,3]) </tt> <br> # <tt> 6 </tt> </td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"> return the sum of all element in the list of number X </td></tr> </tbody></table><p></p><p><tt>***</tt> <strong>This function depends on context variables</strong> in addition to the function parameters. It is also the core function to compare the students' response and model answer (see <a href="#Grading_variables">Grading variables</a>). If input X and Y are a list of string, then <tt> X[i] </tt> and <tt> Y[i] </tt> are treated as algebraic formula and all variables in them must be defined before the location of evaluation. For example, </p><pre class="prettyprint">a = 3;<br>x = {1:100};<br>d = diff(["a x"],["a x^2"]);</pre><p>Please
 note that the actual algebraic formulas should be "3 x" and "3 x^2" in 
the above case. In the above evaluation, the d will take a finite value 
but not close to zero because the algebraic formula are different. In 
general, any evaluation failure between two algebraic formula will 
result in a infinite value INF, so that the expression, say, sum(d) &lt;
 0.01 will always be false. </p><p>The evaluation will take place at N 
randomly selected points defined in all algebraic variables. The result 
will be the root mean square difference at all evaluation points (1/N)Σ<sub>i</sub>(X<sub>i</sub>-Y<sub>i</sub>)<sup>2</sup>, which will converge when N tends to infinity. The N is 100 by default if it is not specified. </p>
 </div>
 </div>
 </td></tr><tr>
</tr></tbody></table>
 </div>

